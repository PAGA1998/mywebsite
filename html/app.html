<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Piero | Web App (Number Guessing Game)</title>

  <!-- Your site stylesheet (from html/ folder, go up one level to styles/) -->
  <link rel="stylesheet" href="../styles/styles.css" />

  <style>
    /* App-only styles (kept in this one page, per assignment suggestion) */
    :root { --card: rgba(255,255,255,.06); --line: rgba(255,255,255,.14); }

    body { min-height: 100vh; }

    .appWrap{
      max-width: 920px;
      margin: 0 auto;
      padding: 28px 16px 56px;
    }

    .appGrid{
      display: grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 18px;
    }

    @media (max-width: 860px){
      .appGrid{ grid-template-columns: 1fr; }
    }

    .panel{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 8px 30px rgba(0,0,0,.25);
    }

    .panel h2{ margin: 0 0 6px; }
    .muted{ opacity: .85; }

    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top: 12px;
    }

    .input{
      flex: 1 1 220px;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,.15);
      color: inherit;
      outline: none;
    }
    .input:focus{
      border-color: rgba(255,255,255,.28);
      box-shadow: 0 0 0 3px rgba(255,255,255,.08);
    }

    .btnApp{
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.10);
      color: inherit;
      cursor: pointer;
      font-weight: 700;
    }
    .btnApp:hover{ background: rgba(255,255,255,.16); }

    .status{
      margin-top: 14px;
      padding: 12px;
      border-radius: 12px;
      border: 1px dashed var(--line);
      background: rgba(0,0,0,.12);
      min-height: 48px;
      display:flex;
      align-items:center;
    }

    .kpis{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 14px;
    }
    .kpiBox{
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 12px;
      background: rgba(255,255,255,.06);
    }
    .kpiLabel{ font-size: 12px; opacity: .75; }
    .kpiVal{ font-size: 20px; font-weight: 900; margin-top: 4px; }

    .history{
      margin-top: 12px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size: 13px;
      line-height: 1.45;
      opacity: .92;
      white-space: pre-wrap;
    }

    /* Simple ‚Äúpill‚Äù tags */
    .pill{
      display:inline-block;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,.12);
      font-size: 12px;
      opacity: .9;
    }
  </style>
</head>

<body>
  <!-- NAV (matches your other pages: from html/ folder, Home is ../index.html) -->
  <header class="nav">
    <div class="container nav-inner">
      <a class="brand" href="../index.html">PIERO ‚Ä¢ FINANCE</a>
      <nav class="nav-links">
        <a href="about.html">About</a>
        <a href="resume.html">Resume</a>
        <a href="skills.html">Skills</a>
        <a href="tableau.html">Tableau</a>
        <a class="active" href="app.html">Web App</a>
        <a href="scratch.html">Scratch</a>
      </nav>
    </div>
  </header>

  <main class="appWrap">
    <div class="panel">
      <h1 style="margin:0 0 6px;">üéØ Number Guessing Game</h1>
      <p class="muted" style="margin:0;">
        Pick a difficulty, then guess the secret number. Built from scratch (HTML + CSS + JavaScript) on one page.
      </p>
      <div class="row" style="margin-top:12px;">
        <span class="pill">No libraries</span>
        <span class="pill">Keyboard Enter support</span>
        <span class="pill">Tracks attempts + best score</span>
      </div>
    </div>

    <div class="appGrid" style="margin-top: 18px;">
      <!-- Left: Game -->
      <section class="panel">
        <h2>Play</h2>
        <p class="muted" style="margin:0;">
          Choose a range, then type a number and hit <b>Guess</b> (or press <b>Enter</b>).
        </p>

        <div class="row">
          <label for="difficulty" class="muted" style="min-width:120px;">Difficulty</label>
          <select id="difficulty" class="input" style="flex: 1 1 260px;">
            <option value="easy">Easy (1‚Äì25)</option>
            <option value="medium" selected>Medium (1‚Äì50)</option>
            <option value="hard">Hard (1‚Äì100)</option>
          </select>
          <button class="btnApp" id="newGameBtn" type="button">New Game</button>
        </div>

        <div class="row">
          <input id="guessInput" class="input" type="number" inputmode="numeric" placeholder="Enter your guess‚Ä¶" />
          <button class="btnApp" id="guessBtn" type="button">Guess</button>
          <button class="btnApp" id="revealBtn" type="button">Reveal</button>
        </div>

        <div class="status" id="statusBox">
          Make your first guess üëÄ
        </div>

        <div class="kpis">
          <div class="kpiBox">
            <div class="kpiLabel">Range</div>
            <div class="kpiVal" id="rangeVal">1‚Äì50</div>
          </div>
          <div class="kpiBox">
            <div class="kpiLabel">Attempts</div>
            <div class="kpiVal" id="attemptsVal">0</div>
          </div>
          <div class="kpiBox">
            <div class="kpiLabel">Best (this device)</div>
            <div class="kpiVal" id="bestVal">‚Äî</div>
          </div>
        </div>

        <div class="history" id="historyBox"></div>
      </section>

      <!-- Right: How it works -->
      <aside class="panel">
        <h2>How it works</h2>
        <ul class="list">
          <li>Generates a random integer within the selected range.</li>
          <li>On each guess, compares your input to the secret number.</li>
          <li>Gives feedback: <b>Too high</b>, <b>Too low</b>, or <b>Correct</b>.</li>
          <li>Saves your best attempt count using <code>localStorage</code>.</li>
        </ul>

        <div class="hr"></div>

        <h3>Navigation</h3>
        <ul class="list">
          <li><a href="../index.html">Return Home</a></li>
          <li><a href="scratch.html">Back to Scratch</a></li>
          <li><a href="tableau.html">View Tableau</a></li>
        </ul>

        <p class="small" style="margin-top:10px;">
          Tip: If GitHub Pages caches an old version, refresh with <b>Cmd + Shift + R</b> or add <code>?v=2</code> to the URL.
        </p>
      </aside>
    </div>
  </main>

  <footer class="footer">
    <div class="container">¬© <span id="year"></span> Piero Gongora ‚Ä¢ Built for BYU Web Project</div>
  </footer>

  <script>
    // ===== Helpers =====
    const $ = (id) => document.getElementById(id);

    const ranges = {
      easy:   { min: 1, max: 25 },
      medium: { min: 1, max: 50 },
      hard:   { min: 1, max: 100 }
    };

    let secret = 0;
    let attempts = 0;
    let min = 1;
    let max = 50;
    let history = [];

    const bestKey = "piero_guess_best";

    function randInt(a, b){
      return Math.floor(Math.random() * (b - a + 1)) + a;
    }

    function setStatus(msg){
      $("statusBox").textContent = msg;
    }

    function render(){
      $("rangeVal").textContent = `${min}‚Äì${max}`;
      $("attemptsVal").textContent = attempts.toString();

      const best = localStorage.getItem(bestKey);
      $("bestVal").textContent = best ? best : "‚Äî";

      $("historyBox").textContent = history.length
        ? "Guesses: " + history.join(", ")
        : "";
    }

    function newGame(){
      const diff = $("difficulty").value;
      min = ranges[diff].min;
      max = ranges[diff].max;

      secret = randInt(min, max);
      attempts = 0;
      history = [];

      $("guessInput").value = "";
      setStatus("New game started. Make a guess!");
      render();
      $("guessInput").focus();
    }

    function reveal(){
      setStatus(`Secret number was ${secret}. Click "New Game" to try again.`);
    }

    function submitGuess(){
      const raw = $("guessInput").value;
      const guess = Number(raw);

      if (!raw){
        setStatus("Please type a number first.");
        return;
      }
      if (!Number.isFinite(guess) || !Number.isInteger(guess)){
        setStatus("Please enter a whole number.");
        return;
      }
      if (guess < min || guess > max){
        setStatus(`Out of range. Enter a number from ${min} to ${max}.`);
        return;
      }

      attempts += 1;
      history.push(guess);

      if (guess === secret){
        setStatus(`‚úÖ Correct! You got it in ${attempts} attempt(s).`);

        const best = localStorage.getItem(bestKey);
        if (!best || attempts < Number(best)){
          localStorage.setItem(bestKey, String(attempts));
        }
      } else if (guess < secret){
        setStatus("‚¨ÜÔ∏è Too low. Try higher.");
      } else {
        setStatus("‚¨áÔ∏è Too high. Try lower.");
      }

      render();
      $("guessInput").select();
    }

    // ===== Wire up events =====
    $("newGameBtn").addEventListener("click", newGame);
    $("guessBtn").addEventListener("click", submitGuess);
    $("revealBtn").addEventListener("click", reveal);
    $("difficulty").addEventListener("change", newGame);

    $("guessInput").addEventListener("keydown", (e) => {
      if (e.key === "Enter") submitGuess();
    });

    $("year").textContent = new Date().getFullYear();

    // Start
    newGame();
  </script>
</body>
</html>
